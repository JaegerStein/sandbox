<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest Map</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: .8rem;
        }

        body {
            background-color: beige;
            position: relative;
            padding: 2rem;
            width: 100vw;
            height: 100vh;
        }

        #quests {
            position: relative;
            background-color: ivory;
            border-radius: 3rem;
            box-shadow: 1rem 1rem 2rem rgba(0 0 0 / .5), -1rem -1rem 2rem rgba(255 255 255 / .5);
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #quest-canvas {
            width: 100%;
            height: 100%;
        }
    </style>

</head>

<body>
    <div id="quests" class="quest">
        <object id="quest-canvas" type="image/svg+xml" data="quests.svg"></object>
    </div>
    <script>
        var svgObject = document.getElementById("quest-canvas");
        var svgDoc;

        svgObject.addEventListener("load", function () {
            svgDoc = svgObject.contentDocument;
            var svgRoot = svgDoc.documentElement;

            var viewBox = svgRoot.getAttribute("viewBox").split(" ");
            var minX = parseFloat(viewBox[0]);
            var minY = parseFloat(viewBox[1]);
            var width = parseFloat(viewBox[2]);
            var height = parseFloat(viewBox[3]);

            var zoomSpeed = 0.1;
            var panSpeed = 1;
            var isPanning = false;
            var startX;
            var startY;

            svgRoot.addEventListener("wheel", function (e) {
                e.preventDefault();
                var delta = e.deltaY > 0 ? zoomSpeed : -zoomSpeed;
                var point = getPointFromEvent(e);
                var scale = 1 + delta;
                var newWidth = width * scale;
                var newHeight = height * scale;
                var newX = minX - (point.x / width * (newWidth - width));
                var newY = minY - (point.y / height * (newHeight - height));
                svgRoot.setAttribute("viewBox", [newX, newY, newWidth, newHeight].join(" "));
            });

            svgRoot.addEventListener("mousedown", function (e) {
                if (e.button === 0) {
                    isPanning = true;
                    startX = e.clientX;
                    startY = e.clientY;
                }
            });

            svgRoot.addEventListener("mousemove", function (e) {
                if (isPanning) {
                    var deltaX = e.clientX - startX;
                    var deltaY = e.clientY - startY;
                    var newMinX = minX - deltaX * panSpeed;
                    var newMinY = minY - deltaY * panSpeed;
                    svgRoot.setAttribute("viewBox", [newMinX, newMinY, width, height].join(" "));
                }
            });

            svgRoot.addEventListener("mouseup", function (e) {
                if (e.button === 0) {
                    isPanning = false;
                }
            });
        });

        function getPointFromEvent(e) {
            var rect = svgObject.getBoundingClientRect();
            return {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        }
    </script>
</body>

</html>